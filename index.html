<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>لعبة علامات الوقف</title>
    <style>
        body {
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            margin: 0;
            padding: 20px;
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(45deg, #ff6b6b, #feca57);
            padding: 30px;
            text-align: center;
            color: white;
        }

        .header h1 {
            margin: 0;
            font-size: 2.5rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .score-board {
            display: flex;
            justify-content: space-around;
            background: #f8f9fa;
            padding: 20px;
            border-bottom: 3px solid #e9ecef;
        }

        .score-item {
            text-align: center;
            padding: 15px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            min-width: 120px;
        }

        .score-number {
            font-size: 2rem;
            font-weight: bold;
            color: #28a745;
        }

        .game-area {
            padding: 40px;
            text-align: center;
        }

        .sentence-card {
            background: linear-gradient(135deg, #74b9ff, #0984e3);
            color: white;
            padding: 30px;
            border-radius: 20px;
            margin-bottom: 30px;
            font-size: 1.8rem;
            line-height: 1.6;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            transform: translateY(0);
            transition: all 0.3s ease;
        }

        .sentence-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.3);
        }

        .options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .option-btn {
            background: linear-gradient(135deg, #fd79a8, #e84393);
            color: white;
            border: none;
            padding: 20px;
            border-radius: 15px;
            font-size: 2rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            font-weight: bold;
        }

        .option-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
        }

        .option-btn.correct {
            background: linear-gradient(135deg, #00b894, #00a085);
            animation: correctPulse 0.6s ease;
        }

        .option-btn.wrong {
            background: linear-gradient(135deg, #e17055, #d63031);
            animation: wrongShake 0.6s ease;
        }

        @keyframes correctPulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        @keyframes wrongShake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        .success-message {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            background: linear-gradient(135deg, #00b894, #00a085);
            color: white;
            padding: 40px;
            border-radius: 20px;
            font-size: 3rem;
            font-weight: bold;
            z-index: 1000;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            text-align: center;
        }

        .success-message.show {
            animation: successShow 1.5s ease;
        }

        @keyframes successShow {
            0% { transform: translate(-50%, -50%) scale(0) rotate(-180deg); opacity: 0; }
            50% { transform: translate(-50%, -50%) scale(1.2) rotate(0deg); opacity: 1; }
            100% { transform: translate(-50%, -50%) scale(0) rotate(180deg); opacity: 0; }
        }

        .next-btn {
            background: linear-gradient(135deg, #a29bfe, #6c5ce7);
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 25px;
            font-size: 1.3rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            margin-top: 20px;
        }

        .next-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
        }

        .progress-bar {
            background: #e9ecef;
            height: 10px;
            border-radius: 5px;
            margin: 20px 0;
            overflow: hidden;
        }

        .progress-fill {
            background: linear-gradient(90deg, #00b894, #00a085);
            height: 100%;
            border-radius: 5px;
            transition: width 0.5s ease;
        }

        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background: #ff6b6b;
            animation: confettiFall 3s linear infinite;
        }

        @keyframes confettiFall {
            0% { transform: translateY(-100vh) rotate(0deg); opacity: 1; }
            100% { transform: translateY(100vh) rotate(360deg); opacity: 0; }
        }

        .game-complete {
            text-align: center;
            padding: 40px;
            background: linear-gradient(135deg, #fd79a8, #fdcb6e);
            color: white;
            border-radius: 20px;
            margin: 20px;
        }

        .restart-btn {
            background: linear-gradient(135deg, #74b9ff, #0984e3);
            color: white;
            border: none;
            padding: 20px 40px;
            border-radius: 25px;
            font-size: 1.5rem;
            cursor: pointer;
            margin-top: 20px;
            transition: all 0.3s ease;
        }

        .explanation {
            background: #fff3cd;
            border: 2px solid #ffeaa7;
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            font-size: 1.2rem;
            color: #856404;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🎯 لعبة علامات الوقف 🎯</h1>
            <p>اختر علامة الوقف المناسبة لكل جملة</p>
            <div style="font-size: 1rem; margin-top: 15px; opacity: 0.9;">
                من تصميم الأستاذ: بن وارث شرف الدين
            </div>
        </div>

        <div class="score-board">
            <div class="score-item">
                <div class="score-number" id="correct-score">0</div>
                <div>إجابات صحيحة</div>
            </div>
            <div class="score-item">
                <div class="score-number" id="current-question">1</div>
                <div>السؤال الحالي</div>
            </div>
            <div class="score-item">
                <div class="score-number">100</div>
                <div>إجمالي الأسئلة</div>
            </div>
        </div>

        <div class="progress-bar">
            <div class="progress-fill" id="progress-fill" style="width: 1%"></div>
        </div>

        <div class="game-area" id="game-area">
            <div class="sentence-card" id="sentence-card">
                <div id="sentence-text"></div>
            </div>

            <div class="options" id="options">
                <button class="option-btn" onclick="selectAnswer('.')">النقطة (.)</button>
                <button class="option-btn" onclick="selectAnswer('?')">علامة الاستفهام (?)</button>
                <button class="option-btn" onclick="selectAnswer('!')">علامة التعجب (!)</button>
                <button class="option-btn" onclick="selectAnswer(',')">الفصلة (،)</button>
            </div>

            <div class="explanation" id="explanation" style="display: none;"></div>

            <button class="next-btn" id="next-btn" onclick="nextQuestion()" style="display: none;">
                السؤال التالي ←
            </button>
        </div>
    </div>

    <div class="success-message" id="success-message">
        🎉 ممتاز! 🎉
    </div>

    <script>
        const sentences = [
            { text: "ما اسمك", answer: "?", explanation: "هذه جملة استفهامية تحتاج لعلامة استفهام" },
            { text: "أحب المدرسة", answer: ".", explanation: "هذه جملة خبرية تحتاج لنقطة" },
            { text: "ما أجمل الطبيعة", answer: "!", explanation: "هذه جملة تعجبية تحتاج لعلامة تعجب" },
            { text: "ذهبت إلى السوق، واشتريت الفواكه", answer: ",", explanation: "الفصلة تفصل بين الجملتين" },
            { text: "كم عمرك", answer: "?", explanation: "سؤال عن العمر يحتاج لعلامة استفهام" },
            { text: "الشمس مشرقة اليوم", answer: ".", explanation: "جملة خبرية تنتهي بنقطة" },
            { text: "يا له من يوم رائع", answer: "!", explanation: "تعبير عن الإعجاب يحتاج لعلامة تعجب" },
            { text: "أين تسكن", answer: "?", explanation: "سؤال عن المكان يحتاج لعلامة استفهام" },
            { text: "القطة تلعب في الحديقة", answer: ".", explanation: "جملة خبرية بسيطة تنتهي بنقطة" },
            { text: "ما أحلى هذه الوردة", answer: "!", explanation: "تعجب من جمال الوردة" },
            { text: "هل تحب الرياضة", answer: "?", explanation: "سؤال يبدأ بـ هل يحتاج لعلامة استفهام" },
            { text: "المطر ينزل بغزارة", answer: ".", explanation: "جملة خبرية تصف حالة الطقس" },
            { text: "كم هو جميل هذا المنظر", answer: "!", explanation: "تعبير عن الإعجاب بالمنظر" },
            { text: "متى ستأتي", answer: "?", explanation: "سؤال عن الوقت يحتاج لعلامة استفهام" },
            { text: "الطيور تغرد في الصباح", answer: ".", explanation: "جملة خبرية تصف سلوك الطيور" },
            { text: "يا لها من مفاجأة سعيدة", answer: "!", explanation: "تعبير عن السعادة والمفاجأة" },
            { text: "أين وضعت كتابي", answer: "?", explanation: "سؤال عن مكان الكتاب" },
            { text: "النحلة تصنع العسل", answer: ".", explanation: "معلومة علمية تنتهي بنقطة" },
            { text: "ما أطيب هذا الطعام", answer: "!", explanation: "تعجب من طعم الطعام" },
            { text: "هل انتهيت من واجبك", answer: "?", explanation: "سؤال عن إنجاز الواجب" },
            { text: "الأسد ملك الغابة", answer: ".", explanation: "حقيقة عن الأسد تنتهي بنقطة" },
            { text: "كم أنت ذكي", answer: "!", explanation: "مدح وإعجاب بالذكاء" },
            { text: "ماذا تريد أن تصبح في المستقبل", answer: "?", explanation: "سؤال عن المستقبل المهني" },
            { text: "الفراشة ملونة وجميلة", answer: ".", explanation: "وصف للفراشة ينتهي بنقطة" },
            { text: "يا للعجب", answer: "!", explanation: "تعبير عن الدهشة والتعجب" },
            { text: "كيف حالك اليوم", answer: "?", explanation: "سؤال عن الحال يحتاج لعلامة استفهام" },
            { text: "الماء ضروري للحياة", answer: ".", explanation: "حقيقة علمية تنتهي بنقطة" },
            { text: "ما أروع هذا الإنجاز", answer: "!", explanation: "إعجاب بالإنجاز المحقق" },
            { text: "من هو معلمك المفضل", answer: "?", explanation: "سؤال عن المعلم المفضل" },
            { text: "الكتاب خير جليس", answer: ".", explanation: "حكمة تنتهي بنقطة" },
            { text: "يا له من طالب مجتهد", answer: "!", explanation: "مدح للطالب المجتهد" },
            { text: "أي لون تفضل", answer: "?", explanation: "سؤال عن اللون المفضل" },
            { text: "الصدق منجاة", answer: ".", explanation: "حكمة عن الصدق تنتهي بنقطة" },
            { text: "ما أجمل الصداقة", answer: "!", explanation: "تعبير عن جمال الصداقة" },
            { text: "هل تساعد والديك في البيت", answer: "?", explanation: "سؤال عن مساعدة الوالدين" },
            { text: "العلم نور", answer: ".", explanation: "حكمة عن العلم تنتهي بنقطة" },
            { text: "كم هي مفيدة القراءة", answer: "!", explanation: "إعجاب بفائدة القراءة" },
            { text: "ما هو طعامك المفضل", answer: "?", explanation: "سؤال عن الطعام المفضل" },
            { text: "الرياضة تقوي الجسم", answer: ".", explanation: "فائدة الرياضة تنتهي بنقطة" },
            { text: "يا لها من لعبة ممتعة", answer: "!", explanation: "إعجاب باللعبة الممتعة" },
            { text: "كم ساعة تنام يومياً", answer: "?", explanation: "سؤال عن ساعات النوم" },
            { text: "النظافة من الإيمان", answer: ".", explanation: "قول مأثور ينتهي بنقطة" },
            { text: "ما أحلى صوت العصافير", answer: "!", explanation: "إعجاب بصوت العصافير" },
            { text: "أين تقضي العطلة", answer: "?", explanation: "سؤال عن مكان قضاء العطلة" },
            { text: "الشجرة تعطي الظل والثمار", answer: ".", explanation: "فوائد الشجرة تنتهي بنقطة" },
            { text: "كم هو مفيد هذا الدرس", answer: "!", explanation: "إعجاب بفائدة الدرس" },
            { text: "هل تحب الرسم", answer: "?", explanation: "سؤال عن حب الرسم" },
            { text: "القمر ينير الليل", answer: ".", explanation: "وظيفة القمر تنتهي بنقطة" },
            { text: "يا له من منظر خلاب", answer: "!", explanation: "إعجاب بالمنظر الجميل" },
            { text: "متى تستيقظ صباحاً", answer: "?", explanation: "سؤال عن وقت الاستيقاظ" },
            { text: "الأم حنونة ومحبة", answer: ".", explanation: "صفات الأم تنتهي بنقطة" },
            { text: "ما أعظم حب الوالدين", answer: "!", explanation: "تعظيم لحب الوالدين" },
            { text: "كيف تذهب إلى المدرسة", answer: "?", explanation: "سؤال عن وسيلة الذهاب للمدرسة" },
            { text: "الصبر مفتاح الفرج", answer: ".", explanation: "حكمة عن الصبر تنتهي بنقطة" },
            { text: "يا لها من قصة مشوقة", answer: "!", explanation: "إعجاب بالقصة المشوقة" },
            { text: "ما هو حيوانك المفضل", answer: "?", explanation: "سؤال عن الحيوان المفضل" },
            { text: "النملة مخلوق مجتهد", answer: ".", explanation: "صفة النملة تنتهي بنقطة" },
            { text: "كم هي جميلة الطبيعة", answer: "!", explanation: "إعجاب بجمال الطبيعة" },
            { text: "هل تشارك في الأنشطة المدرسية", answer: "?", explanation: "سؤال عن المشاركة في الأنشطة" },
            { text: "الحديقة مليئة بالورود", answer: ".", explanation: "وصف الحديقة ينتهي بنقطة" },
            { text: "ما أطيب رائحة الورد", answer: "!", explanation: "إعجاب برائحة الورد" },
            { text: "أين تحب أن تسافر", answer: "?", explanation: "سؤال عن مكان السفر المفضل" },
            { text: "البحر واسع وعميق", answer: ".", explanation: "صفات البحر تنتهي بنقطة" },
            { text: "يا له من إنجاز رائع", answer: "!", explanation: "تهنئة بالإنجاز الرائع" },
            { text: "كم مرة تزور جدك", answer: "?", explanation: "سؤال عن تكرار زيارة الجد" },
            { text: "الطائر يطير في السماء", answer: ".", explanation: "سلوك الطائر ينتهي بنقطة" },
            { text: "ما أحلى طعم التفاح", answer: "!", explanation: "إعجاب بطعم التفاح" },
            { text: "هل تحفظ القرآن الكريم", answer: "?", explanation: "سؤال عن حفظ القرآن" },
            { text: "الشتاء بارد والصيف حار", answer: ".", explanation: "خصائص الفصول تنتهي بنقطة" },
            { text: "كم هو مفيد شرب الماء", answer: "!", explanation: "إعجاب بفائدة شرب الماء" },
            { text: "ماذا تحب أن تأكل في الإفطار", answer: "?", explanation: "سؤال عن طعام الإفطار" },
            { text: "الشمس تشرق من الشرق", answer: ".", explanation: "حقيقة جغرافية تنتهي بنقطة" },
            { text: "يا لها من فكرة ذكية", answer: "!", explanation: "إعجاب بالفكرة الذكية" },
            { text: "كم عدد أصدقائك", answer: "?", explanation: "سؤال عن عدد الأصدقاء" },
            { text: "الكتابة مهارة مهمة", answer: ".", explanation: "أهمية الكتابة تنتهي بنقطة" },
            { text: "ما أروع هذا الاختراع", answer: "!", explanation: "إعجاب بالاختراع الرائع" },
            { text: "أي مادة تحب أكثر في المدرسة", answer: "?", explanation: "سؤال عن المادة المفضلة" },
            { text: "الصحة تاج على رؤوس الأصحاء", answer: ".", explanation: "حكمة عن الصحة تنتهي بنقطة" },
            { text: "كم هو مهم التعاون", answer: "!", explanation: "تأكيد على أهمية التعاون" },
            { text: "هل تساعد زملاءك في الدراسة", answer: "?", explanation: "سؤال عن مساعدة الزملاء" },
            { text: "الليل للراحة والنهار للعمل", answer: ".", explanation: "تقسيم الوقت ينتهي بنقطة" },
            { text: "يا له من طقس جميل", answer: "!", explanation: "إعجاب بجمال الطقس" },
            { text: "كيف تقضي وقت فراغك", answer: "?", explanation: "سؤال عن قضاء وقت الفراغ" },
            { text: "الأسنان تحتاج للتنظيف اليومي", answer: ".", explanation: "نصيحة صحية تنتهي بنقطة" },
            { text: "ما أجمل الابتسامة", answer: "!", explanation: "إعجاب بجمال الابتسامة" },
            { text: "من هو بطلك المفضل", answer: "?", explanation: "سؤال عن البطل المفضل" },
            { text: "الحاسوب أداة مفيدة للتعلم", answer: ".", explanation: "فائدة الحاسوب تنتهي بنقطة" },
            { text: "كم هي ممتعة الألعاب التعليمية", answer: "!", explanation: "إعجاب بمتعة الألعاب التعليمية" },
            { text: "هل تحب الموسيقى", answer: "?", explanation: "سؤال عن حب الموسيقى" },
            { text: "الفيل أكبر الحيوانات البرية", answer: ".", explanation: "معلومة عن الفيل تنتهي بنقطة" },
            { text: "يا لها من مغامرة شيقة", answer: "!", explanation: "إعجاب بالمغامرة الشيقة" },
            { text: "أين تحب أن تلعب", answer: "?", explanation: "سؤال عن مكان اللعب المفضل" },
            { text: "الذهب معدن ثمين", answer: ".", explanation: "خاصية الذهب تنتهي بنقطة" },
            { text: "ما أحلى صوت المطر", answer: "!", explanation: "إعجاب بصوت المطر" },
            { text: "كم مرة تغسل أسنانك يومياً", answer: "?", explanation: "سؤال عن نظافة الأسنان" },
            { text: "الورقة تأتي من الشجر", answer: ".", explanation: "مصدر الورق ينتهي بنقطة" },
            { text: "كم هو مفيد الحليب للأطفال", answer: "!", explanation: "تأكيد على فائدة الحليب" },
            { text: "ماذا تفعل عندما تشعر بالحزن", answer: "?", explanation: "سؤال عن التعامل مع الحزن" },
            { text: "الضوء أسرع من الصوت", answer: ".", explanation: "حقيقة علمية تنتهي بنقطة" },
            { text: "يا له من عمل رائع", answer: "!", explanation: "مدح للعمل الرائع" },
            { text: "هل تحب القصص", answer: "?", explanation: "سؤال عن حب القصص" },
            { text: "الأرض كوكبنا الجميل", answer: ".", explanation: "وصف الأرض ينتهي بنقطة" },
            { text: "ما أعظم خلق الله", answer: "!", explanation: "تعظيم لخلق الله" },
            { text: "كيف تشعر عندما تنجح", answer: "?", explanation: "سؤال عن مشاعر النجاح" },
            { text: "النار حارة والثلج بارد", answer: ".", explanation: "خصائص طبيعية تنتهي بنقطة" },
            { text: "كم هو جميل التنوع في الطبيعة", answer: "!", explanation: "إعجاب بتنوع الطبيعة" }
        ];

        let currentQuestion = 0;
        let correctAnswers = 0;
        let gameEnded = false;

        function loadQuestion() {
            if (currentQuestion >= sentences.length) {
                endGame();
                return;
            }

            const sentence = sentences[currentQuestion];
            document.getElementById('sentence-text').textContent = sentence.text;
            document.getElementById('current-question').textContent = currentQuestion + 1;
            document.getElementById('progress-fill').style.width = ((currentQuestion + 1) / sentences.length * 100) + '%';
            
            // Reset buttons
            const buttons = document.querySelectorAll('.option-btn');
            buttons.forEach(btn => {
                btn.className = 'option-btn';
                btn.disabled = false;
            });

            document.getElementById('explanation').style.display = 'none';
            document.getElementById('next-btn').style.display = 'none';
        }

        function selectAnswer(selectedAnswer) {
            if (gameEnded) return;

            const sentence = sentences[currentQuestion];
            const buttons = document.querySelectorAll('.option-btn');
            
            buttons.forEach(btn => btn.disabled = true);

            if (selectedAnswer === sentence.answer) {
                // Correct answer
                correctAnswers++;
                document.getElementById('correct-score').textContent = correctAnswers;
                
                // Find and highlight correct button
                buttons.forEach(btn => {
                    if (btn.textContent.includes(selectedAnswer)) {
                        btn.classList.add('correct');
                    }
                });

                playCorrectSound();
                showSuccessMessage();
                createConfetti();
            } else {
                // Wrong answer
                buttons.forEach(btn => {
                    if (btn.textContent.includes(selectedAnswer)) {
                        btn.classList.add('wrong');
                    }
                    if (btn.textContent.includes(sentence.answer)) {
                        btn.classList.add('correct');
                    }
                });
                
                playWrongSound();
            }

            // Show explanation
            document.getElementById('explanation').textContent = sentence.explanation;
            document.getElementById('explanation').style.display = 'block';
            document.getElementById('next-btn').style.display = 'block';
        }

        function playCorrectSound() {
            // Create audio context for correct answer sound
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            
            // Create a pleasant success sound (ascending notes)
            const frequencies = [523.25, 659.25, 783.99]; // C5, E5, G5
            frequencies.forEach((freq, index) => {
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.frequency.setValueAtTime(freq, audioContext.currentTime + index * 0.1);
                oscillator.type = 'sine';
                
                gainNode.gain.setValueAtTime(0, audioContext.currentTime + index * 0.1);
                gainNode.gain.linearRampToValueAtTime(0.3, audioContext.currentTime + index * 0.1 + 0.05);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + index * 0.1 + 0.3);
                
                oscillator.start(audioContext.currentTime + index * 0.1);
                oscillator.stop(audioContext.currentTime + index * 0.1 + 0.3);
            });
        }

        function playWrongSound() {
            // Create audio context for wrong answer sound
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            
            // Create a gentle error sound (descending notes)
            const frequencies = [400, 350, 300]; // Descending tones
            frequencies.forEach((freq, index) => {
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.frequency.setValueAtTime(freq, audioContext.currentTime + index * 0.15);
                oscillator.type = 'triangle';
                
                gainNode.gain.setValueAtTime(0, audioContext.currentTime + index * 0.15);
                gainNode.gain.linearRampToValueAtTime(0.2, audioContext.currentTime + index * 0.15 + 0.05);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + index * 0.15 + 0.4);
                
                oscillator.start(audioContext.currentTime + index * 0.15);
                oscillator.stop(audioContext.currentTime + index * 0.15 + 0.4);
            });
        }

        function showSuccessMessage() {
            const successMsg = document.getElementById('success-message');
            successMsg.classList.add('show');
            
            setTimeout(() => {
                successMsg.classList.remove('show');
            }, 1500);
        }

        function createConfetti() {
            const colors = ['#ff6b6b', '#4ecdc4', '#45b7d1', '#96ceb4', '#feca57', '#ff9ff3'];
            
            for (let i = 0; i < 50; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.left = Math.random() * 100 + 'vw';
                    confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.animationDelay = Math.random() * 3 + 's';
                    document.body.appendChild(confetti);
                    
                    setTimeout(() => {
                        confetti.remove();
                    }, 3000);
                }, i * 50);
            }
        }

        function nextQuestion() {
            currentQuestion++;
            loadQuestion();
        }

        function endGame() {
            gameEnded = true;
            const percentage = Math.round((correctAnswers / sentences.length) * 100);
            
            document.getElementById('game-area').innerHTML = `
                <div class="game-complete">
                    <h2>🎉 تهانينا! لقد أنهيت اللعبة! 🎉</h2>
                    <div style="font-size: 3rem; margin: 20px 0;">
                        ${correctAnswers}/${sentences.length}
                    </div>
                    <div style="font-size: 2rem; margin: 20px 0;">
                        نسبة النجاح: ${percentage}%
                    </div>
                    <div style="font-size: 1.5rem; margin: 20px 0;">
                        ${percentage >= 80 ? '🌟 ممتاز جداً!' : 
                          percentage >= 60 ? '👍 جيد جداً!' : 
                          percentage >= 40 ? '👌 جيد!' : '💪 يمكنك التحسن!'}
                    </div>
                    <button class="restart-btn" onclick="restartGame()">
                        🔄 ابدأ من جديد
                    </button>
                </div>
            `;
            
            createConfetti();
        }

        function restartGame() {
            currentQuestion = 0;
            correctAnswers = 0;
            gameEnded = false;
            
            document.getElementById('correct-score').textContent = '0';
            document.getElementById('game-area').innerHTML = `
                <div class="sentence-card" id="sentence-card">
                    <div id="sentence-text"></div>
                </div>

                <div class="options" id="options">
                    <button class="option-btn" onclick="selectAnswer('.')">النقطة (.)</button>
                    <button class="option-btn" onclick="selectAnswer('?')">علامة الاستفهام (?)</button>
                    <button class="option-btn" onclick="selectAnswer('!')">علامة التعجب (!)</button>
                    <button class="option-btn" onclick="selectAnswer(',')">الفصلة (،)</button>
                </div>

                <div class="explanation" id="explanation" style="display: none;"></div>

                <button class="next-btn" id="next-btn" onclick="nextQuestion()" style="display: none;">
                    السؤال التالي ←
                </button>
            `;
            
            loadQuestion();
        }

        // Shuffle sentences for variety
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        // Initialize game
        shuffleArray(sentences);
        loadQuestion();
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'987ce63064e5335d',t:'MTc1OTMzMTU1Ni4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
